{% extends '../base_in.html' %}
{% block titulo %}
    Prestamo de Equipo
{% endblock titulo %}

{% block l3 %}
    active
{% endblock l3 %}

{% block cuerpo %}
<div class="card text-center">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
            <a class="nav-link {{ clases.o1 }}" href="{% url 'prestamos:crear_prestamo-url' %}">Gestión de Prestamos</a>
            </li>
            <li class="nav-item">
            <a class="nav-link {{ clases.o2 }}" href="">Prestamos</a>
            </li>
            <li class="nav-item">
            <a class="nav-link {{ clases.o3 }} " href="">...</a>
            </li>
            <li class="nav-item">
            <a class="nav-link {{ clases.o3 }}" href="#">...</a>
            </li>
        </ul>
    </div>
    <div class="card-body">
        <div style="{{estilos.o1}}">
            
            {% if object %}
            <form role="form" action="{% url 'prestamos:modificar_prestamo-url' object.numPrestamo %}" method="post">
            {% else %}
            <form role="form" action="{% url 'prestamos:crear_prestamo-url' %}" method="post">
            {% endif %}
                
                <h3>Crear prestamo de equipo</h3>
                {% csrf_token %}
                <div class="panel panel-default">
                        <div class="panel-body">
                                {{ form.as_p }}
                                {{ detallePrestamoEquipoFormSet.management_form }}
                                {% for d in detallePrestamoEquipoFormSet %}
                                <div class="row">
                                    <div class="col-4">{{ d.descripcion }}</div>
                                    <div class="col-4">{{ d.equipo }}</div>
                                    <div class="col-4">{{ d.tapadera }}</div>
                                </div>
                                        <!-- <div class="row">
                                                <div class="col-lg-4">
                                                        <label>Producto</label>
                                                        {% if detalle_compra_form.producto.errors %}
                                                                {% for error in detalle_compra_form.producto.errors %}
                                                                <div class="alert alert-danger alert-dismissible" role="alert">
                                                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                                <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                        <strong>Error: </strong> {{ error|escape }}
                                                                </div>
                                                                {% endfor %}
                                                        {% endif %}
                                                        {{ detalle_compra_form.producto }}
                                                </div>
                                                <div class="col-lg-4">
                                                        <label>Cantidad</label>
                                                        {% if detalle_compra_form.cantidad.errors %}
                                                                {% for error in detalle_compra_form.cantidad.errors %}
                                                                <div class="alert alert-danger alert-dismissible" role="alert">
                                                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                                <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                        <strong>Error: </strong> {{ error|escape }}
                                                                </div> -->
                                                                <!-- {% endfor %}
                                                        {% endif %}
                                                        {{ detalle_compra_form.cantidad }}
                                                </div>
                                                <div class="col-lg-4">
                                                        <label>Precio</label>
                                                        {% if detalle_compra_form.precio_compra.errors %}
                                                                {% for error in detalle_compra_form.precio_compra.errors %}
                                                                <div class="alert alert-danger alert-dismissible" role="alert">
                                                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                                <span aria-hidden="true">&times;</span>
                                                                        </button>
                                                                        <strong>Error: </strong> {{ error|escape }}
                                                                </div>
                                                                {% endfor %}
                                                        {% endif %}
                                                        {{ detalle_compra_form.precio_compra }}
                                                </div>
                                        </div> -->
                                {% endfor %}
                        </div>
                </div>
                <div class="col-lg-12 text-right">
                        <input type="submit" class="btn btn-primary" name="submit" value="Guardar">
                        <a type="button" class="btn btn-default" href="{% url 'prestamos:prestamos-url' %}">
                                Cancelar
                        </a>
                </div>
        </form>

        </div>
        <div style="{{estilos.o2}}">
            <table id="tablajs" class="table table-striped table-hover">
                <thead class="thead-inverse">
                    <tr>
                        <th>Cod.</th>
                        <th>Compañía</th>
                        <th>Placa</th>
                        <th>Hora de salida</th>
                        <th>Fecha de salida</th>
                        <th>Fecha de entrada</th>
                        <th>Conductor</th>
                        <th>empleado</th>
                        <th>observaciones</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                        <!-- <th>Añadir</th> -->
                    </tr>
                    </thead>
                    <tbody>     
                    {% for p in prestamos %}
                         <tr 
                         {% if e.estadoPrestamo.id == 1 %}
                             class="table-primary"
                        {% elif e.estadoPrestamo.id == 2 %}
                            class="table-success"
                        {% elif e.estadoPrestamo.id == 3 %}
                            class="table-danger"
                         {% endif %}
                             >
                             <td>{{ p.numPrestamo }}</td>
                             <td>{{ p.compania }}</td>
                             <td><a href="">{{ p.placa }}</a></td>
                             <td>{{ p.horaSalida }}</td>
                             <td>{{ p.fechaSalida }}</td>
                             <td>{{ p.fechaEntrada }}</td>
                             <td>{{ p.conductor }}</td>
                             <td>{{ p.empleado }}</td>
                             <td>{{ p.observaciones }}</td>
                             <td>{{ p.estadoPrestamo }}</td>
                             <td> <a href="{% url 'prestamos:modificar_prestamo-url' p.numPrestamo %}" class="btn btn-outline-info">Editar</a> </td>
                            
                            
                            <!-- <td><button class="btn btn-success">Añadir</button></td> -->


                         </tr>       
                    {% endfor %}                            
                    </tbody>
            </table>
        </div>
    </div>
        
</div>
{% endblock cuerpo %}
{% load static %}
{% block script %}
    <script src="{% static 'js/prestamos.js'%}"></script>
{% endblock script %}
    
    
